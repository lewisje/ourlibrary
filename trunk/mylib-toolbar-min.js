var API,global=this;if(API&&API.areFeatures&&API.areFeatures("getEBTN","getElementText","checkControl","emptyNode","attachListener")){(function(){var Q=API;var N=Q.isHostMethod;var W=Q.createElement,A=Q.getEBTN;var E=Q.isControlChecked,L=Q.isControlDisabled,e=Q.isControlPressed,g=Q.callInContext;var V=Q.setControlRole,K=Q.checkControl,H=Q.disableControl,U=Q.pressControl;var F=Q.attachListener,O=Q.detachListener,a=Q.cancelDefault,I=Q.cancelPropagation,d=Q.getEventTarget,D=Q.getEventTargetRelated;var T=Q.emptyNode,f=Q.getElementNodeName,S=Q.getElementParentElement,P=Q.getElementDocument,C=Q.getElementText;var Z=Q.toArray;var c;var J=function(h){if(V){V(h,"button")}if(E(h)){K(h)}if(e(h)){U(h)}if(L(h)){H(h)}if(API.makeElementUnselectable){API.makeElementUnselectable(h)}};var B=function(h){return a(h)};var G=function(i,h){return function(j){if(g(i,h,this,D(j))===false){if(N(this,"blur")){this.blur()}return a(j)}}};var R=function(k,i,j){var h=W("a",j);if(h){if(i){h.appendChild(j.createTextNode(i))}else{if(API.addClass){API.addClass(k,"nocaption")}}h.tabIndex=0;h.href="#";T(k);k.appendChild(h)}return h};var X=function(h,k,j,i){F(h,"click",B,k);if(j){F(h,"focus",G(j,i||API),k)}};var M=function(k,r,p){if(!p){p=P(k)}if(p&&N(p,"createTextNode")){if(V){V(k,"toolbar")}var m=A("div",k);for(var l=m.length;l--;){var h=m[l];var o,j=A("a",h);if(!j.length){var q=C(h);if(q){o=R(h,q,p)}}else{o=j[0]}X(o,h,r.onfocus,r.callbackContext);J(h)}F(k,"mousedown",function(s){var i=d(s);if(f(i)=="a"){i=S(i)}if(S(i)==this&&!L(i)){U(i)}});F(k,"mouseup",function(s){var i=d(s);if(f(i)=="a"){i=S(i)}if(S(i)==this&&!L(i)){U(i,false)}});F(k,"click",function(y){var t,w,s,v=d(y),u;if(r.radio){var x=c(this);for(t=x.length;t--;){if(E(x[t])){u=x[t]}}}if(f(v)=="a"){v=S(v)}if(v!=this&&!L(v)){if(v&&r.onclick){s=g(r.onclick,r.callbackContext||API,this,v,u)}if(s!==false){if(r.radio){w=A("div",this);for(t=w.length;t--;){var z=w[t];if(z!=v){K(z,false)}}if(v){K(v)}}}return a(y)}});var n=r.oncustomize;if(n){F(k,"dblclick",function(s){var i=d(s);if(i==this){g(n,r.callbackContext||API,this);return a(s)}})}k=m=null}};Q.enhanceToolbar=M;var Y=function(h){return I(h)};Q.attachDocumentReadyListener(function(){var h=global.API,j=h.attachDragToControl,i=h.detachDragFromControl;if(j){h.attachDragToToolbar=function(n,o,k){j(n,o);var m=A("div",n);for(var l=m.length;l--;){F(m[l],"mousedown",Y)}};h.detachDragFromToolbar=function(m,n){i(m,n);var l=A("div",m);for(var k=l.length;k--;){O(l[k],"mousedown",Y)}}}h=null});var b;if(W&&W("div")){Q.addToolbarButton=b=function(k,i,l){if(!l){l=global.document}var j=W("div",l);j.className=i.className||"button";var h=R(j,i.text||"",l);X(h,j,i.onfocus,i.callbackContext);if(i.title){j.title=i.title}if(i.id){j.id=i.id}J(j);k.appendChild(j);return j};Q.removeToolbarButton=function(i,h){i.removeChild(h)};Q.createToolbar=function(j,o){if(!o){o=global.document}if(!j){j={}}var m=W(j.tagName||"div",o);m.className=j.className||"toolbar";var n=j.buttons;if(n){var h=n.length;for(var k=0;k<h;k++){b(m,n[k],o)}}M(m,j,o);return m};Q.getToolbarButtons=c=function(h){return Z(h.getElementsByTagName("div"))}}Q=null})()}